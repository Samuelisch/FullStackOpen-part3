(this["webpackJsonp2.19-2.20"]=this["webpackJsonp2.19-2.20"]||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),o=t(2),u=t(0),i=function(e){var n=e.searchChange;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{onChange:n})]})},s=function(e){var n=e.name,t=e.number,c=e.toggleDelete;return Object(u.jsxs)("div",{children:[n," ",t,Object(u.jsx)("button",{type:"button",onClick:c,children:"Delete"})]})},d=function(e){var n=e.nameChange,t=e.numChange,c=e.btnClick;return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{onChange:n})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{onChange:t})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},l=t(4),b=t.n(l),f="/api/persons",j={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))}},h=function(e){var n=e.notif;return null===n?null:(console.log(n.type,n.text),Object(u.jsx)("div",{className:n.type,children:n.text}))},m=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),l=Object(a.a)(r,2),b=l[0],f=l[1],m=Object(o.useState)(""),O=Object(a.a)(m,2),p=O[0],v=O[1],x=Object(o.useState)(""),g=Object(a.a)(x,2),C=g[0],w=g[1],y=Object(o.useState)(!0),k=Object(a.a)(y,2),S=k[0],D=k[1],A=Object(o.useState)(null),N=Object(a.a)(A,2),P=N[0],E=N[1];Object(o.useEffect)((function(){j.getAll().then((function(e){c(e)}))}),[]);var J=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";E({text:e,type:n}),setTimeout((function(){E(null)}),5e3)},B=S?t:t.filter((function(e){return e.name.toLowerCase().includes(b)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(h,{notif:P}),Object(u.jsx)(i,{searchChange:function(e){D(!1),f(e.target.value)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(d,{nameChange:function(e){v(e.target.value)},numChange:function(e){w(e.target.value)},btnClick:function(e){e.preventDefault();var n,r={name:p,number:C},a=function(e){var n=t.find((function(n){return n.name===e}));return!!n&&n.id}(r.name);a?function(e,n){if(window.confirm("".concat(e.name," is already in this phonebook, replace with new number?"))){var r=t.find((function(e){return e.id===n}));e.oldNumber=r.number,j.update(n,e).then((function(r){c(t.map((function(e){return e.id!==n?e:r}))),J("Updated ".concat(e.name,"'s number to ").concat(e.number))})).catch((function(e){J(e.response.data.error,"error")}))}}(r,a):(n=r.number,""!==r.name&&""!==n?j.create(r).then((function(e){c(t.concat(e)),J("Added ".concat(r.name," to the phonebook"))})).catch((function(e){return J(e.response.data.error,"error")})):J("Field is empty!","error"))}}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)("div",{children:B.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(s,{name:e.name,number:e.number,toggleDelete:function(){return function(e){if(window.confirm("Do you really want to delete?")){var n=t.find((function(n){return n.id===e}));j.deletePerson(e).then((function(r){J("".concat(n.name," has been deleted from the phonebook")),c(t.filter((function(n){return n.id!==e})))})).catch((function(r){J("".concat(n.name," has already been deleted"),"error"),c(t.filter((function(n){return n.id!==e})))}))}}(e.id)}})},e.id)}))})]})};t(38);r.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3d2c7f3a.chunk.js.map